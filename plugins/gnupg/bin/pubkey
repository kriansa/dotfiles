#!/usr/bin/env zsh
#
# Usage: pubkey
# Description: Pipe my SSH public key to my clipboard.
#

source $ZSH/lib/clipboard.zsh

# Use this if you're using standard SSH keys instead GnuPG agent
# more ~/.ssh/id_rsa.pub | clipcopy | clipcopy | echo '=> Public key copied to clipboard.'

KEY_DESCRIPTION=$(gpg2 -K "$GPG_MAIN_KEY" | grep uid | sed 's/.*\] //g')
gpg2 --export-ssh-key $GPG_MAIN_KEY | sed "s/openpgp:.*/$KEY_DESCRIPTION/" | clipcopy | echo '=> Public key copied to clipboard.'
