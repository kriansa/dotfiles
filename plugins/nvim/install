#!/usr/bin/env zsh

# Plugin vim
# Installation proccess:
#
#  1. Link folder
#  2. Fix terminal kbs issue
#  3. Run package install
#

source 'helpers/installer_helper.zsh'
PLUGIN_PATH=$0:A:h
DOTFILES_ROOT=$(pwd)

# 1. Link files
link_file $PLUGIN_PATH '.config/nvim'

# 2. Fix terminal kbs issue (https://github.com/neovim/neovim/issues/2048)
infocmp $TERM | sed 's/kbs=^[hH]/kbs=\\177/' > $TMPDIR/$TERM.ti
tic $TMPDIR/$TERM.ti
rm $TMPDIR/$TERM.ti

# 3. Run package install
nvim -c PlugInstall -c qa
